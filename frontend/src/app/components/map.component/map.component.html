<div class="container">

  <!-- CONTROLES -->
  <div class="controls">
    <button
      class="manual"
      [class.active]="manualMode"
      (click)="toggleManualMode()">
      {{ manualMode ? 'Manual Mode Active' : 'Enable Manual Mode' }}
    </button>
    <button class="primary" (click)="addRandomPoint()">+ Random Point</button>
    <button class="primary" (click)="generate20RandomPoints()">+ 20 Random Points</button>
    <button class="primary" (click)="optimize()">Otimizar (NN)</button>
    <button class="primary" (click)="fifoRoute()">Rota FIFO</button>
    <button class="primary" (click)="generateStations()">â• Gerar EstaÃ§Ãµes</button>
    <button class="danger" (click)="clearStations()">ğŸ—‘ï¸ Limpar EstaÃ§Ãµes</button>
    <button class="danger" (click)="clear()">Clear All</button>
  </div>

  <!-- VELOCIDADE -->
  <div class="speed-control">
    Van Speed:
    <input
      type="range"
      min="0.5"
      max="5"
      step="0.1"
      value="1"
      (input)="changeSpeed($event)"
    />
  </div>

  <!-- BATERIA -->
  <div class="battery">
    ğŸ”‹ Battery:
    <span [style.color]="remainingEnergy < 0 ? 'red' : '#00ffcc'">
      {{ remainingEnergy | number:'1.0-2' }} kWh
    </span>
  </div>

  <!-- MAPA -->
  <div class="map-container" style="height: 600px;">
    <canvas
      #routeCanvas
      class="map-canvas"
      (click)="onCanvasClick($event)">
    </canvas>
  </div>

  <!-- PAINEL DE INFORMAÃ‡Ã•ES -->
  <app-route-info
    [totalDistance]="totalDistance"
    [deliveriesCount]="optimizedRoute.length - 2"
    [currentSegment]="currentSegment"
    [totalSegments]="optimizedRoute.length - 1"
    [distanceToNext]="distanceToNext"
    [remainingDistance]="remainingDistance">
  </app-route-info>

  <!-- DICA -->
  <div class="hint" *ngIf="manualMode">
    Click anywhere on the map to add delivery points.
  </div>

</div>